{% extends "base.html" %}
{% load static %}

{% block title %}نور گلد | گالری طلا{% endblock %}

{% block content %}
    <!-- HERO -->
    <section class="mb-5">
        <div class="row align-items-center gy-4">
            <div class="col-lg-6">
                <div class="hero-badge mb-3">
                    <i class="bi bi-stars"></i>
                    <span>مجموعه منتخب طلا و جواهرات</span>
                </div>
                <h1 class="hero-title mb-3">
                    درخشش
                    <span class="hero-highlight">نور گلد</span>
                    روی دستان و گردن شما
                </h1>
                <p class="hero-subtitle mb-4">
                    انگشتر، گردنبند، دستبند، سرویس کامل و طرح‌های خاص و محدود؛
                    برای مشتریانی که جزئیات و کیفیت برایشان مهم است.
                </p>
                <div class="d-flex flex-wrap gap-2 justify-content-lg-start justify-content-center">
                    <a href="{% url 'shop:product_list' %}" class="btn btn-gold px-4 py-2">
                        مشاهده همه محصولات
                    </a>
                    <a href="#categories" class="btn btn-outline-gold px-4 py-2">
                        دسته‌بندی‌ها
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-image-wrap">
                    <div class="hero-main-circle">
                        <div class="hero-glow"></div>
                        {% if hero_product and hero_product.images.all|first %}
                            {% with hero_img=hero_product.images.all|first %}
                                <img src="{{ hero_img.image.url }}" alt="{{ hero_product.name }}">
                            {% endwith %}
                        {% else %}
                            <img src="{% static 'img/hero-default.jpg' %}" alt="Noor Gold">
                        {% endif %}
                    </div>
                    {% if hero_product %}
                        <div class="hero-tag-card d-none d-md-block">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <span class="small">محصول ویژه</span>
                                {% if hero_product.wage_tier %}
                                    <span class="badge rounded-pill">
                                        {{ hero_product.wage_tier.name }}
                                    </span>
                                {% endif %}
                            </div>
                            <p class="mb-0 small">
                                {{ hero_product.name }}<br>
                                <span class="small">
                                    وزن تقریبی: {{ hero_product.weight_gram }} گرم
                                </span>
                            </p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- CATEGORIES -->
    <section id="categories" class="mb-4 mb-md-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="section-title mb-0">
                دسته‌بندی‌ها
                <span>النگو، انگشتر، سرویس و بیشتر</span>
            </h2>
        </div>
        <div class="row g-3 g-md-4">
            {% for cat in featured_categories %}
                <div class="col-6 col-md-3">
                    <a href="{% url 'shop:category_detail' cat.slug %}"
                       class="text-decoration-none text-light">
                        <div class="category-card h-100 d-flex align-items-center gap-3">
                            <div class="category-icon-wrap">
                                {% if forloop.counter == 1 %}
                                    <i class="bi bi-circle"></i>
                                {% elif forloop.counter == 2 %}
                                    <i class="bi bi-link-45deg"></i>
                                {% elif forloop.counter == 3 %}
                                    <i class="bi bi-gem"></i>
                                {% else %}
                                    <i class="bi bi-brilliance"></i>
                                {% endif %}
                            </div>
                            <div>
                                <div class="category-name">{{ cat.name }}</div>
                                {% if cat.description %}
                                    <div class="category-desc">
                                        {{ cat.description|truncatechars:50 }}
                                    </div>
                                {% else %}
                                    <div class="category-desc text-muted">
                                        مشاهده محصولات این دسته
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </div>
            {% empty %}
                <p class="text-muted small">هنوز دسته‌ای ثبت نشده است.</p>
            {% endfor %}
        </div>
    </section>

    <!-- LATEST PRODUCTS -->
    <section class="mb-2 mb-md-3">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="section-title mb-0">
                جدیدترین محصولات
                <span>چند نمونه از گالری نور گلد</span>
            </h2>
            <a href="{% url 'shop:product_list' %}" class="small text-decoration-none" style="color: var(--gold);">
                مشاهده همه
            </a>
        </div>
        <div class="row g-3 g-md-4">
            {% for product in latest_products %}
                <div class="col-6 col-md-3">
                    <a href="{% url 'shop:product_detail' product.slug %}"
                       class="text-decoration-none text-light">
                        <div class="product-card h-100">
                            <div class="product-image-wrapper">
                                {% with main_image=product.images.all.0 %}
                                    {% if main_image %}
                                        <img src="{{ main_image.image.url }}"
                                             alt="{{ product.name }}">
                                    {% else %}
                                        <img src="https://via.placeholder.com/400x400?text=No+Image"
                                             alt="{{ product.name }}">
                                    {% endif %}
                                {% endwith %}
                                {% if product.is_featured %}
                                    <div class="product-chip">ویژه</div>
                                {% endif %}
                            </div>
                            <div class="product-body">
                                <div class="product-category">
                                    {{ product.category.name }}
                                </div>
                                <div class="product-name">
                                    {{ product.name }}
                                </div>
                                <div class="product-meta">
                                    <span>وزن: {{ product.weight_gram }} گرم</span>
                                    {% if product.wage_tier %}
                                        <span>اجرت: {{ product.wage_tier.name }}</span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="product-footer d-flex justify-content-between align-items-center">
                                <span class="product-link">مشاهده جزئیات</span>
                                <i class="bi bi-arrow-left-short"></i>
                            </div>
                        </div>
                    </a>
                </div>
            {% empty %}
                <p class="text-muted small">هنوز محصولی ثبت نشده است.</p>
            {% endfor %}
        </div>
    </section>
{% endblock %}
